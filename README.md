# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/types/components/— папка с интерфесами/типами для компонентов
- src/types/components/base — папка с базовыми типами
- src/types/components/model — папка с типами для части моделей
- src/types/components/view — папка с типами для части view

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

### **Описание базовых классов и интерфейсов**

#### **Класс `EventEmitter`**
`EventEmitter` — обеспечивает возможность устанавливать слушатели событий, снимать их и вызывать при возникновении события. Методы `on`, `off` и `emit` предоставляют механизм для управления событиями, а метод `reset` очищает все слушатели.

---

#### **Интерфейс `IView`**
Каждый компонент имеет корневой элемент (`element`), который можно использовать для рендеринга в DOM. Метод `render` позволяет обновлять содержимое компонента на основе переданных данных, а метод `copy` создает копию компонента с новыми настройками.

---

#### **Интерфейсы `IViewConstructor` и `IScreenConstructor`**
Эти интерфейсы описывают конструкторы для создания представлений и экранов. `IViewConstructor` используется для создания компонентов на основе шаблонов или существующих элементов DOM, а `IScreenConstructor` — для создания экранов, таких как главная страница.

---

#### **Интерфейсы `IClickable`, `IChangeable`, `ISelectable`**
Эти интерфейсы описывают поведение интерактивных компонентов. `IClickable` используется для кнопок или карточек товаров, которые реагируют на клики пользователя. `IChangeable` применяется для форм ввода, чтобы отслеживать изменения значений. `ISelectable` помогает обрабатывать выбор элементов.

---

### **Описание компонентов**

#### **Компонент `Button`**
`Button` используется для выполнения действий, таких как добавление товара в корзину или закрытие модального окна. Она отображает текст (`label`) и может быть временно отключена (`disabled`). Благодаря интерфейсу `IClickable`, кнопка интегрируется в любую часть приложения.

---

#### **Компонент `Modal`**
`Modal` — модальное окно, которое отображает произвольное содержимое. Через интерфейс `ModalSettings` можно настроить обработчики событий открытия и закрытия, а также добавить сообщения об ошибках. Модальное окно взаимодействует с `EventEmitter`, чтобы уведомлять другие части приложения о своих действиях.

---

#### **Компонент `Billing`**
Компонент `Billing` используется для отображения формы выбора способа оплаты и адреса доставки. Он работает с интерфейсом `IChangeable`, чтобы отслеживать изменения в полях ввода, таких как способ оплаты (`paymentMethod`) и адрес (`address`). Этот компонент связан с моделью данных `AppState`, которая хранит информацию о способе оплаты и адресе. При изменении данных в форме они автоматически обновляются в модели.

---

#### **Компонент `Card`**
Карточка товара отображает информацию о продукте: название, категория, цена и изображение. Она использует интерфейс `IClickable` для обработки кликов пользователя. Карточки товаров могут быть как обычными, так и компактными (в корзине). Компонент связан с моделью данных, так как получает информацию о продуктах из `AppState`.

---

#### **Компонент `Contacts`**
Компонент `Contacts` отвечает за отображение формы ввода контактных данных. Он использует интерфейс `IChangeable` для отслеживания изменений в полях ввода. Этот компонент взаимодействует с моделью данных `AppState`, чтобы сохранять введенные пользователем контакты. Также он предоставляет методы для навигации между шагами оформления заказа (`onNext` и `onBack`).

---

#### **Компонент `Product`**
Компонент `Product` отвечает за отображение информации о товаре. Он может использоваться для отображения товара в каталоге, в корзине или в модальном окне. Компонент поддерживает два режима отображения: обычный и компактный (`isCompact`). В компактном режиме компонент может включать кнопку удаления товара из корзины (`delete`). Этот компонент связан с моделью данных `AppState`, которая предоставляет информацию о товарах.

---

#### **Компонент `BillingForm`**
Форма оплаты и доставки позволяет пользователю указать способ оплаты и адрес. Она использует интерфейс `IChangeable` для отслеживания изменений в полях ввода. Форма связана с `AppState`, чтобы сохранять введенные данные и проверять их корректность.

---

#### **Компонент `Cart`**
Корзина отображает список товаров, выбранных пользователем, и общую стоимость заказа. Она предоставляет методы для удаления товаров и обработки переходов к следующим шагам оформления заказа. Корзина взаимодействует с `AppState` для получения данных о товарах и обновления состояния приложения.

---

#### **Компонент `ContactsForm`**
Форма контактов запрашивает у пользователя email и телефон. Она работает аналогично форме оплаты и доставки, используя интерфейс `IChangeable`. После ввода данных пользователь может перейти к следующему шагу или вернуться назад.

---

#### **Компонент `Main`**
Компонент `Main` представляет собой главную страницу приложения, где отображается список товаров. Он использует данные о товарах из модели `AppState` и отображает их с помощью компонентов карточек товаров (`Card`). Компонент также предоставляет кнопку для открытия корзины (`onOpenCart`) и возможность просмотра деталей товара (`onOpenProduct`).

---

#### **Компонент `ModalScreen`**
Компонент `ModalScreen` отвечает за управление экранами модальных окон. Он предоставляет методы для закрытия (`onClose`) и перехода к следующему шагу (`onNext`). Этот компонент взаимодействует с моделью данных `AppState`, чтобы определить текущее состояние модального окна.

---

#### **Компонент `Success`**
Сообщение об успешном оформлении заказа отображается после завершения процесса покупки. Оно показывает общую стоимость заказа и предлагает пользователю вернуться к покупкам. Этот компонент взаимодействует с `AppState` для получения данных о заказе.

---

### **Описание базовых классов и интерфейсов**

Проект построен на модульной архитектуре, где каждый компонент или класс выполняет строго определенную задачу. Основные части архитектуры включают данные, отображения, события и экраны. Давайте разберем их подробнее.

---

#### **Класс `EventEmitter`**
`EventEmitter` — это сердце событийной модели приложения. Он обеспечивает возможность устанавливать слушателей событий, снимать их и вызывать при возникновении события. Этот класс позволяет реализовать реактивность: например, когда пользователь добавляет товар в корзину, обновляется интерфейс, а также состояние приложения. Методы `on`, `off` и `emit` предоставляют удобный механизм для управления событиями, а метод `reset` очищает все слушатели, что полезно для предотвращения утечек памяти. Связь между различными частями приложения (например, между моделью данных и представлением) осуществляется именно через этот класс.

---

#### **Интерфейс `IView`**
`IView` определяет контракт для всех UI-компонентов. Каждый компонент имеет корневой элемент (`element`), который можно использовать для рендеринга в DOM. Метод `render` позволяет обновлять содержимое компонента на основе переданных данных, а метод `copy` создает копию компонента с новыми настройками. Этот интерфейс гарантирует, что все компоненты имеют единый подход к работе с данными и отображению, что упрощает их повторное использование и тестирование.

---

#### **Интерфейсы `IViewConstructor` и `IScreenConstructor`**
Эти интерфейсы описывают конструкторы для создания представлений и экранов. `IViewConstructor` используется для создания компонентов на основе шаблонов или существующих элементов DOM, а `IScreenConstructor` — для создания полноценных экранов, таких как главная страница или страница корзины. Эти интерфейсы обеспечивают стандартизацию процесса создания UI-компонентов, что делает код более предсказуемым и удобным для поддержки.

---

#### **Интерфейсы `IClickable`, `IChangeable`, `ISelectable`**
Эти интерфейсы описывают поведение интерактивных компонентов. Например, `IClickable` используется для кнопок или карточек товаров, которые реагируют на клики пользователя. `IChangeable` применяется для форм ввода, таких как поля адреса или контактов, чтобы отслеживать изменения значений. `ISelectable` помогает обрабатывать выбор элементов, например, в списках товаров. Эти интерфейсы обеспечивают унифицированный подход к обработке пользовательских действий, что упрощает интеграцию компонентов.

---

### **Архитектура проекта**

Проект разделен на несколько ключевых частей:

1. **Данные**: Модель данных (`AppState`) хранит информацию о товарах, корзине, контактах и текущем состоянии приложения. Она взаимодействует с API через интерфейс `IProductAPI`.

2. **Отображения**: Интерфейсы `IView`, `IClickable`, `IChangeable` и `ISelectable` обеспечивают унифицированный подход к созданию и управлению UI-компонентами.

3. **События**: `EventEmitter` связывает различные части приложения, позволяя им реагировать на действия пользователя.

4. **Экраны**: Интерфейс `IScreenConstructor` используется для создания полноценных экранов, таких как главная страница или страница корзины.

---

### **Типы данных**

- **`Product`**: Описывает товар с ID, названием, описанием, изображением, категорией и ценой.
- **`Order`**: Содержит информацию о заказе, включая способ оплаты, адрес, контакты и список товаров.
- **`BillingInfo` и `Contacts`**: Описывают данные для оплаты, доставки и контактов.

---

### **Как реализованы процессы**

Процессы в приложении реализованы через события. Когда пользователь добавляет товар в корзину, событие передается через `EventEmitter`, и модель данных обновляется. Затем обновленные данные передаются в соответствующий компонент, который перерисовывает интерфейс.
